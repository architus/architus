input {
    http {
        host => "0.0.0.0"
        port => "51031"
        codec => protobuf {
            class_name => "logs.event.Event"
            class_file => '/opt/logstash/proto/logs/event_pb.rb'
            protobuf_root_directory => "/opt/logstash/proto/"
            protobuf_version => 3
            pb3_encoder_autoconvert_types => true
        }
    }
}

output {
    elasticsearch {
		hosts => "elasticsearch:9200"
        index => "logs-events"
        document_id => "%{[id]}"
    }
}
