# The port that the gRPC server listens on
port = 50282
# How long to wait for durable submission confirmation
# before returning with "deadline exceeded" and encouraging retry
submission_wait_timeout = "2s"
# The number of events that will trigger an immediate batch submit
# even if the event submission debounce period has not elapsed
debounce_size = 32
# The period of time since the oldest event in a batch was enqueued
# that the entire batch will be submitted
debounce_period = "100ms"
# Elasticsearch index containing the stored log events
elasticsearch_index = "logs-events"
# Elasticsearch index settings file that corresponds to the logs index
elasticsearch_index_config_path = "/etc/architus/index_config.json"

[services]
# URL of the Elasticsearch instance to store log entries in
elasticsearch = "http://elasticsearch:9200"

# Parameters for the backoff used to connect to external services during initialization
[initialization_backoff]
initial_interval = "500ms"
max_interval = "30s"
duration = "2m"
multiplier = 2.0

# Parameters for the backoff used to create the index
[index_creation_backoff]
initial_interval = "100ms"
max_interval = "10s"
duration = "2m"
multiplier = 2.0

# Parameters for the backoff used to forward events to Elasticsearch
[submission_backoff]
initial_interval = "100ms"
max_interval = "10s"
duration = "2m"
multiplier = 2.0

# Logging configuration (for service diagnostic logs, not Architus log events)
# https://docs.rs/sloggers/2.0.0/sloggers/terminal/struct.TerminalLoggerBuilder.html
[logging]
level = "info"
format = "full"
source_location = "file_and_line"
timezone = "utc"
destination = "stdout"
channel_size = 2048
overflow_strategy = "drop_and_report"
